<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>网页特效 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image has" style="background-position-y: 50%; background-image: url(&quot;https://cdn.wostatic.cn/cover/thomas/oqF4PeVaaQSb8hmLgdk4hK.jpg&quot;)"></div><div class="title"><div class="banner"><div data-symbol="🎏" class="icon"></div></div><div data-title="网页特效" class="main-title"></div></div></header><article><h3 class="bg-vivid_tangerine wolai-block"><span class="inline-wrap">offset</span></h3><div class="wolai-block wolai-center"><figure><img src="media/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-02-08%20153951.png" style="width: 760px"/></figure></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">offset<span class="jill"></span>获取值   |    style       修改和获取</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/l0hutuw15bya5y-r5pah5qgjl2ltywdlcy9dc3ncb3hnb2rlbc5wbmc.png" style="width: 756px"/></figure></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>mousemove</code></span><span class="inline-wrap">     鼠标移动</span></div></div><h2 class="wolai-block"><span class="inline-wrap"><u><b>模态框</b></u></span><span class="inline-wrap">❗</span></h2><div class="wolai-sub-page wolai-block"><div data-symbol="🍭" class="page-icon"></div><a href="%E6%A8%A1%E6%80%81%E6%A1%86/%E6%A8%A1%E6%80%81%E6%A1%86.html"><span>模态框</span></a></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">鼠标事件</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/%E6%AF%94%E7%89%B9%E6%88%AA%E5%9B%BE2022-02-19-10-58-56.png" style="width: 760px"/></figure></div><div class="bg-uranian_blue wolai-block wolai-text"><div><span class="inline-wrap">client</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/%E6%AF%94%E7%89%B9%E6%88%AA%E5%9B%BE2022-02-19-11-40-19.png" style="width: 760px"/></figure></div><div class="bg-uranian_blue wolai-block wolai-text"><div><span class="inline-wrap">立即执行函数</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>(function() {}) () </code></span><span class="inline-wrap">   或者   </span><span class="inline-wrap"><code>（function() {} ()）;</code></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">立即执行函数最大的作用就是 独立创建了一个作用域</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>var dpr = window.devicePixelRatio</code></span><span class="inline-wrap">     获取屏幕像素比</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>pageshow</code></span><span class="inline-wrap">     重新加载页面触发的事件</span></div></div><div class="bg-pale_purple wolai-block wolai-text"><div><span class="inline-wrap"> scroll</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/%E6%AF%94%E7%89%B9%E6%88%AA%E5%9B%BE2022-02-21-15-55-26.png" style="width: 760px"/></figure></div><div class="bg-lavender_blue wolai-block wolai-text"><div><span class="inline-wrap">简单的动画封装</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token selector">// 简单动画函数封装obj目标对象 target 目标位置
        function animate<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> target<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
            <span class="token selector">var timer = setInterval<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
                <span class="token selector">if <span class="token punctuation">(</span>obj<span class="token class">.offsetLeft</span> <span class="token combinator">></span>= target<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
                    // 停止动画 本质是停止定时器
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                obj.style.left = obj.offsetLeft <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span></pre></div></code-block><div class="bg-uranian_blue wolai-block wolai-text"><div><span class="inline-wrap">动画<span class="jill"></span>js</span></div></div><div class="wolai-file-block wolai-block"><div class="file-icon" style="background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; width=&apos;24&apos; height=&apos;24&apos; viewBox=&apos;0 0 24 24&apos;%3E%3Cpath d=&apos;M12.157 2.2a2.8 2.8 0 011.856.703l.148.142 4.843 4.965a2.8 2.8 0 01.789 1.756l.007.199V19a2.8 2.8 0 01-2.63 2.795L17 21.8H7a2.8 2.8 0 01-2.795-2.63L4.2 19V5a2.8 2.8 0 012.63-2.795L7 2.2h5.157zM11.2 3.8H7a1.2 1.2 0 00-1.194 1.077L5.8 5v14a1.2 1.2 0 001.077 1.194L7 20.2h10a1.2 1.2 0 001.194-1.077L18.2 19v-8.2H13a1.8 1.8 0 01-1.794-1.652L11.2 9V3.8zm1.816.362a1.2 1.2 0 00-.215-.175L12.8 9a.2.2 0 00.147.193L13 9.2h4.923l-.064-.073-4.843-4.965z&apos; fill=&apos;%232C2C2C&apos; fill-rule=&apos;evenodd&apos;%3E%3C/path%3E%3C/svg%3E&quot;);"></div><a href="media/animate.js"><span>animate.js</span><span data-size="1.08 kB" class="file-size"></span></a></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>mouseleave</code></span><span class="inline-wrap">    鼠标离开</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>mouseenter</code></span><span class="inline-wrap">     鼠标经过</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>window.addEventListener(&#39;load&#39;,function() {})</code></span><span class="inline-wrap">      页面加载完在执行<span class="jill"></span>js</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>arrow_r.click();</code></span><span class="inline-wrap">     手动调用事件</span></div></div><div class="bg-lavender_blue wolai-block wolai-text"><div><span class="inline-wrap">轮播图</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="JavaScript" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 获取元素</span>
    <span class="token keyword">var</span> arrow_l <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'.arrow-l'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> arrow_r <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'.arrow-r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> focus <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'.focus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> focusWidth <span class="token operator">=</span> focus<span class="token punctuation">.</span><span class="token property-access">offsetWidth</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 鼠标经过focus 就显示隐藏左右按钮</span>
    focus<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arrow_l<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        arrow_r<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span> <span class="token comment">// 清除定时器变量</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    focus<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arrow_l<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        arrow_r<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">display</span> <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//手动调用点击事件</span>
            arrow_r<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 动态生成小圆圈  有几张图片，我就生成几个小圆圈</span>
    <span class="token keyword">var</span> ul <span class="token operator">=</span> focus<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ol <span class="token operator">=</span> focus<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">'.circle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(ul.children.length);</span>
    <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ul<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个小li </span>
        <span class="token keyword">var</span> li <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 记录当前小圆圈的索引号 通过自定义属性来做 </span>
        li<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 把小li插入到ol 里面</span>
        ol<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4. 小圆圈的排他思想 我们可以直接在生成小圆圈的同时直接绑定点击事件</span>
        li<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 干掉所有人 把所有的小li 清除 current 类名</span>
            <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 留下我自己  当前的小li 设置current 类名</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
            <span class="token comment">// 5. 点击小圆圈，移动图片 当然移动的是 ul </span>
            <span class="token comment">// ul 的移动距离 小圆圈的索引号 乘以 图片的宽度 注意是负值</span>
            <span class="token comment">// 当我们点击了某个小li 就拿到当前小li 的索引号</span>
            <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 当我们点击了某个小li 就要把这个li 的索引号给 num  </span>
            num <span class="token operator">=</span> index<span class="token punctuation">;</span>
            <span class="token comment">// 当我们点击了某个小li 就要把这个li 的索引号给 circle  </span>
            circle <span class="token operator">=</span> index<span class="token punctuation">;</span>
            <span class="token comment">// num = circle = index;</span>
            <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>focusWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>index <span class="token operator">*</span> focusWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 把ol里面的第一个小li设置类名为 current</span>
    ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
    <span class="token comment">// 6. 克隆第一张图片(li)放到ul 最后面</span>
    <span class="token keyword">var</span> first <span class="token operator">=</span> ul<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ul<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 7. 点击右侧按钮， 图片滚动一张</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// circle 控制小圆圈的播放</span>
    <span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// flag 节流阀</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    arrow_r<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 关闭节流阀</span>
            <span class="token comment">// 如果走到了最后复制的一张图片，此时 我们的ul 要快速复原 left 改为 0</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> ul<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ul<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 打开节流阀</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 8. 点击右侧按钮，小圆圈跟随一起变化 可以再声明一个变量控制小圆圈的播放</span>
            circle<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果circle == 4 说明走到最后我们克隆的这张图片了 我们就复原</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>circle <span class="token operator">==</span> ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                circle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 调用函数</span>
            <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 9. 左侧按钮做法</span>
    arrow_l<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                num <span class="token operator">=</span> ul<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                ul<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span> <span class="token operator">=</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span>
            num<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 点击左侧按钮，小圆圈跟随一起变化 可以再声明一个变量控制小圆圈的播放</span>
            circle<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果circle &lt; 0  说明第一张图片，则小圆圈要改为第4个小圆圈（3）</span>
            <span class="token comment">// if (circle &lt; 0) {</span>
            <span class="token comment">//     circle = ol.children.length - 1;</span>
            <span class="token comment">// }</span>
            circle <span class="token operator">=</span> circle <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> circle<span class="token punctuation">;</span>
            <span class="token comment">// 调用函数</span>
            <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 先清除其余小圆圈的current类名</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 留下当前的小圆圈的current类名</span>
        ol<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span>circle<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 10. 自动播放轮播图</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//手动调用点击事件</span>
        arrow_r<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span></pre></div></code-block><div class="bg-uranian_blue wolai-block wolai-text"><div><span class="inline-wrap">节流阀</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">利用回调函数添加一个变量来控制，锁住函数和解锁函数</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="JavaScript" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"> <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 关闭节流阀</span>
            <span class="token comment">//执行代码</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>